<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="hire">

	<select id="getAllHires" resultType="java.util.HashMap">
		select * from hire
	</select>

	<select id="getAllHiresByStartdate"
		resultType="java.util.HashMap">
		select * from(company join hire on
		company.coname=hire.name) order by startdate desc
	</select>
	
	
	<select id="getStartByPage" parameterType="java.util.HashMap" resultType="java.util.HashMap">
		select * from (select rownum, s.* from (select * from company join hire on
		company.coname=hire.name) s order by startdate desc) where rownum between #{s} and #{e}
	</select>

	<select id="getAllHiresByEnddate" resultType="java.util.HashMap">
		select *
		from(company join hire on
		company.coname=hire.name) order by enddate
		asc
	</select>
	
	<select id="getEndByPage" parameterType="java.util.HashMap"  resultType="java.util.HashMap">
		select * from (select rownum, s.* from (select * from company join hire on
		company.coname=hire.name) s order by enddate asc) where rownum between #{s} and #{e}
	</select>

	<select id="getAllHiresByHits" resultType="java.util.HashMap">
		select * from (company
		join hire on
		company.coname=hire.name) order by hits
		desc
	</select>
	<select id="getHitsByPage" parameterType="java.util.HashMap"  resultType="java.util.HashMap">
		select * from (select rownum, s.* from (select * from company join hire on
		company.coname=hire.name) s order by hits desc) where rownum between #{s} and #{e}
	</select>


	<select id="getSearchResults" parameterType="java.util.HashMap"
		resultType="java.util.HashMap">
		select * from(company join hire on company.coname=hire.name) where
		search='true'
		<if test="cate!='all'">
			and jobcate = #{cate}
		</if>
		<if test="big!='all'">
			and big = #{big}
		</if>
		<if test="small!='all'">
			and small = #{small}
		</if>
		<if test="cotype!='all'">
			and cotype = #{cotype}
		</if>
		<if test="hireshape!='all'">
			and hireshape = #{hireshape}
		</if>
		order by enddate asc
	</select>

	<select id="getHireByHino" parameterType="java.lang.Number"
		resultType="java.util.HashMap">
		select * from(company join hire on
		company.coname=hire.name) where hino=#{hino}
	</select>

	<select id="getHireByCono" parameterType="java.lang.Number"
		resultType="java.util.HashMap">
		select * from(company join hire on
		company.coname=hire.name) where cono=#{cono}
	</select>

	<select id="getDeadline3" parameterType="java.lang.String"
		resultType="java.util.HashMap">
		select * from (select * from hire join company on hire.name
		= company.coname)t
		join PICKEDCOMPANY on t.cono=pickedcompany.cono
		where pickedcompany.id=#{id} and enddate-sysdate&lt;=3 and
		enddate-sysdate&gt;=2
	</select>

	<insert id="addhire" parameterType="java.util.HashMap">
		insert into hire
		values(hire_seq.nextval,#{title},#{content},#{startdate},#{enddate},#{name},#{jobcate},#{recruitnum},#{email},'0',#{hireshape},#{path},'true')
	</insert>

	<select id="getToday" parameterType="java.lang.String"
		resultType="java.util.HashMap">
		select * from (select * from hire join company on hire.name
		= company.coname)t
		join PICKEDCOMPANY on t.cono=pickedcompany.cono
		where pickedcompany.id=#{id} and enddate-sysdate&lt;=1 and
		enddate-sysdate&gt;=-1
	</select>

	<select id="getDeadLine6" resultType="java.util.HashMap">
		select * from (select
		rownum as r, d.* from(select * from(company join hire
		on
		company.coname=hire.name) where enddate &gt; sysdate order by
		enddate
		asc) d) where r between 1 and 6
	</select>



</mapper>
